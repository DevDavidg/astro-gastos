---
import Layout from '../layouts/Layout.astro';
import AddRowForm from '../components/inputs/AddRowForm.astro';
import Card from '../components/ui/Card.astro';
import GastosApp from '../components/GastosApp';
import HomeRedirect from '../components/auth/HomeRedirect';
---

<Layout title="Control de Gastos">
	<HomeRedirect client:only="react" />

	<h1 class="text-xl sm:text-2xl md:text-3xl font-bold mb-4 sm:mb-6 md:mb-8">Expense Tracker</h1>

	<Card className="mb-4 sm:mb-6 md:mb-8">
		<AddRowForm />
	</Card>

	<div class="grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6">
		<div class="lg:col-span-2">
			<GastosApp client:load showChart={false} />
		</div>
		<div>
			<Card>
				<GastosApp client:load showTable={false} />
			</Card>
		</div>
	</div>
</Layout>

<script>
	document.addEventListener('nuevoGasto', (e: any) => {
		const customEvent = e as CustomEvent;
		console.log('Nuevo gasto:', customEvent.detail);
	});
</script>
