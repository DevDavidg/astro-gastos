import{s as d}from"./supabase.D8XsvUjI.js";import{B as l}from"./constants.CU4QNKZE.js";import"./_commonjsHelpers.D6-XlEtG.js";function m(){return window.location.hash.substring(1).split("&").reduce((s,c)=>{const[e,o]=c.split("=");return e&&o&&(s[e]=decodeURIComponent(o)),s},{})}async function h(){const t=m(),s=t.access_token,c=t.refresh_token,e=t.type,o=document.getElementById("loading"),a=document.getElementById("success"),i=document.getElementById("error"),r=document.getElementById("errorMessage");if(!s||!e){o?.classList.add("hidden"),i?.classList.remove("hidden"),r&&(r.textContent="No se ha encontrado un enlace de verificación válido.");return}try{if(e==="signup"||e==="recovery"){const{error:n}=await d.auth.setSession({access_token:s,refresh_token:c});if(n)throw n;o?.classList.add("hidden"),a?.classList.remove("hidden"),setTimeout(()=>{window.location.href=`${l}/`},2e3)}else throw new Error("Tipo de verificación desconocido")}catch(n){console.error("Error during email confirmation:",n),o?.classList.add("hidden"),i?.classList.remove("hidden"),r&&(r.textContent=n instanceof Error?n.message:"Error desconocido")}}document.addEventListener("DOMContentLoaded",h);
